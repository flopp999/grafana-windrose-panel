{"version":3,"sources":["../src/colorpicker.js"],"names":["angular","module","factory","closest","elem","selector","matchesSelector","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","bind","parentNode","getOffset","x","y","isNaN","offsetLeft","offsetTop","offsetParent","top","left","extend","i","arguments","length","key","hasOwnProperty","stringParsers","re","parse","execResult","parseInt","helper","value","h","s","b","a","rgb","toRGB","r","g","toHex","RGBtoHSB","H","S","V","C","Math","max","min","HueToRGB","p","q","setColor","val","toLowerCase","parser","match","exec","values","space","apply","setHue","setSaturation","setLightness","setAlpha","R","G","B","X","abs","round","toString","substr","directive","$document","$compile","Color","require","restrict","link","$scope","attrs","ngModel","template","colorpickerTemplate","element","pickerColor","pickerColorPreview","pickerColorAlpha","pickerColorBase","pickerColorPointers","pointer","slider","thisFormat","colorpicker","position","colorpickerPosition","enabled","css","addClass","find","style","document","body","append","$render","$viewValue","$watch","update","remove","previewColor","backgroundColor","e","slidersUpdate","event","stopPropagation","preventDefault","zone","target","className","maxLeft","maxTop","callLeft","callTop","knob","children","pageX","pageY","mousemove","call","newColor","$apply","$setViewValue","mouseup","unbind","eq","getColorpickerTemplatePosition","positionValue","positionOffset","offsetHeight","hideColorpickerTemplate","hasClass","removeClass"],"mappings":"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","file":"colorpicker.js","sourcesContent":["'use strict';\n\nangular.module('grafana.services')\n  .factory('helper', function () {\n    return {\n      closest: function (elem, selector) {\n        var matchesSelector = elem.matches || elem.webkitMatchesSelector || elem.mozMatchesSelector || elem.msMatchesSelector;\n        while (elem) {\n          if (matchesSelector.bind(elem)(selector)) {\n            return elem;\n          } else {\n            elem = elem.parentNode;\n          }\n        }\n        return false;\n      },\n      getOffset: function (elem) {\n        var\n          x = 0,\n          y = 0;\n        while (elem && !isNaN(elem.offsetLeft) && !isNaN(elem.offsetTop)) {\n          x += elem.offsetLeft;\n          y += elem.offsetTop;\n          elem = elem.offsetParent;\n        }\n        return {\n          top: y,\n          left: x\n        };\n      },\n      extend: function () {\n        for (var i = 1; i < arguments.length; i++) {\n          for (var key in arguments[i]) {\n            if (arguments[i].hasOwnProperty(key)) {\n              arguments[0][key] = arguments[i][key];\n            }\n          }\n        }\n        return arguments[0];\n      },\n      // a set of RE's that can match strings and generate color tuples. https://github.com/jquery/jquery-color/\n      stringParsers: [\n        {\n          re: /rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\n          parse: function (execResult) {\n            return [\n              execResult[1],\n              execResult[2],\n              execResult[3],\n              execResult[4]\n            ];\n          }\n        },\n        {\n          re: /rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\n          parse: function (execResult) {\n            return [\n              2.55 * execResult[1],\n              2.55 * execResult[2],\n              2.55 * execResult[3],\n              execResult[4]\n            ];\n          }\n        },\n        {\n          re: /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,\n          parse: function (execResult) {\n            return [\n              parseInt(execResult[1], 16),\n              parseInt(execResult[2], 16),\n              parseInt(execResult[3], 16)\n            ];\n          }\n        },\n        {\n          re: /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,\n          parse: function (execResult) {\n            return [\n              parseInt(execResult[1] + execResult[1], 16),\n              parseInt(execResult[2] + execResult[2], 16),\n              parseInt(execResult[3] + execResult[3], 16)\n            ];\n          }\n        }\n      ]\n    };\n  });\n\n angular.module('grafana.services')\n .factory('Color', ['helper', function (helper) {\n    return {\n      value: {\n        h: 1,\n        s: 1,\n        b: 1,\n        a: 1\n      },\n      // translate a format from Color object to a string\n      'rgb': function () {\n        var rgb = this.toRGB();\n        return 'rgb(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ')';\n      },\n      'rgba': function () {\n        var rgb = this.toRGB();\n        return 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')';\n      },\n      'hex': function () {\n        return  this.toHex();\n      },\n\n      // HSBtoRGB from RaphaelJS\n      RGBtoHSB: function (r, g, b, a) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n\n        var H, S, V, C;\n        V = Math.max(r, g, b);\n        C = V - Math.min(r, g, b);\n        H = (C === 0 ? null :\n          V == r ? (g - b) / C :\n            V == g ? (b - r) / C + 2 :\n              (r - g) / C + 4\n          );\n        H = ((H + 360) % 6) * 60 / 360;\n        S = C === 0 ? 0 : C / V;\n        return {h: H || 1, s: S, b: V, a: a || 1};\n      },\n\n      HueToRGB: function (p, q, h) {\n        if (h < 0)\n          h += 1;\n        else if (h > 1)\n          h -= 1;\n\n        if ((h * 6) < 1)\n          return p + (q - p) * h * 6;\n        else if ((h * 2) < 1)\n          return q;\n        else if ((h * 3) < 2)\n          return p + (q - p) * ((2 / 3) - h) * 6;\n        else\n          return p;\n      },\n\n      //parse a string to HSB\n      setColor: function (val) {\n        val = val.toLowerCase();\n        for (var key in helper.stringParsers) {\n          var parser = helper.stringParsers[key];\n          var match = parser.re.exec(val),\n            values = match && parser.parse(match),\n            space = parser.space || 'rgba';\n          if (values) {\n            this.value = this.RGBtoHSB.apply(null, values);\n            return false;\n          }\n        }\n      },\n\n      setHue: function (h) {\n        this.value.h = 1 - h;\n      },\n\n      setSaturation: function (s) {\n        this.value.s = s;\n      },\n\n      setLightness: function (b) {\n        this.value.b = 1 - b;\n      },\n\n      setAlpha: function (a) {\n        this.value.a = parseInt((1 - a) * 100, 10) / 100;\n      },\n\n      // HSBtoRGB from RaphaelJS\n      // https://github.com/DmitryBaranovskiy/raphael/\n      toRGB: function (h, s, b, a) {\n        if (!h) {\n          h = this.value.h;\n          s = this.value.s;\n          b = this.value.b;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = b * s;\n        X = C * (1 - Math.abs(h % 2 - 1));\n        R = G = B = b - C;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return {\n          r: Math.round(R * 255),\n          g: Math.round(G * 255),\n          b: Math.round(B * 255),\n          a: a || this.value.a\n        };\n      },\n\n      toHex: function (h, s, b, a) {\n        var rgb = this.toRGB(h, s, b, a);\n        return '#' + ((1 << 24) | (parseInt(rgb.r) << 16) | (parseInt(rgb.g) << 8) | parseInt(rgb.b)).toString(16).substr(1);\n      }\n    };\n  }]);\n\nangular.module('grafana.directives')\n  .directive('colorpicker', ['$document', '$compile', 'Color', 'helper', function ($document, $compile, Color, helper) {\n    return {\n      require: '?ngModel',\n      restrict: 'A',\n      link: function ($scope, elem, attrs, ngModel) {\n        var\n          template = '<div class=\"colorpicker dropdown-menu\">' +\n            '<div class=\"colorpicker-saturation\"><i><b></b></i></div>' +\n            '<div class=\"colorpicker-hue\"><i></i></div>' +\n            '<div class=\"colorpicker-alpha\"><i></i></div>' +\n            '<div class=\"colorpicker-color\"><div></div></div>' +\n            '<button class=\"close close-colorpicker\">&times;</button>' +\n            '</div>',\n          colorpickerTemplate = angular.element(template),\n          pickerColor = Color,\n          pickerColorPreview,\n          pickerColorAlpha,\n          pickerColorBase,\n          pickerColorPointers,\n          pointer = null,\n          slider = null;\n\n        var thisFormat = attrs.colorpicker ? attrs.colorpicker : 'hex';\n        var position = attrs.colorpickerPosition ? attrs.colorpickerPosition : 'bottom';\n\n\n        $compile(colorpickerTemplate)($scope);\n\n        pickerColorAlpha = {\n          enabled: thisFormat === 'rgba',\n          css: null\n        };\n\n        if (pickerColorAlpha.enabled === true) {\n          colorpickerTemplate.addClass('alpha');\n          pickerColorAlpha.css = colorpickerTemplate.find('div')[2].style;\n        }\n\n        colorpickerTemplate.addClass('colorpicker-position-' + position);\n\n        angular.element(document.body).append(colorpickerTemplate);\n\n        if(ngModel) {\n          ngModel.$render = function () {\n            elem.val(ngModel.$viewValue);\n          };\n          $scope.$watch(attrs.ngModel, function() {\n            update();\n          });\n        }\n\n        elem.bind('$destroy', function() {\n          colorpickerTemplate.remove();\n        });\n\n        pickerColorBase = colorpickerTemplate.find('div')[0].style;\n        pickerColorPreview = colorpickerTemplate.find('div')[4].style;\n        pickerColorPointers = colorpickerTemplate.find('i');\n\n        var previewColor = function () {\n          try {\n            pickerColorPreview.backgroundColor = pickerColor[thisFormat]();\n          } catch (e) {\n            pickerColorPreview.backgroundColor = pickerColor.toHex();\n          }\n          pickerColorBase.backgroundColor = pickerColor.toHex(pickerColor.value.h, 1, 1, 1);\n          if (pickerColorAlpha.enabled === true) {\n            pickerColorAlpha.css.backgroundColor = pickerColor.toHex();\n          }\n        };\n\n        var slidersUpdate = function (event) {\n          event.stopPropagation();\n          event.preventDefault();\n\n          var zone = helper.closest(event.target, 'div');\n\n          if (zone.className === 'colorpicker-saturation') {\n            slider = helper.extend({}, {\n              maxLeft: 100,\n              maxTop: 100,\n              callLeft: 'setSaturation',\n              callTop: 'setLightness'\n            });\n          }\n          else if (zone.className === 'colorpicker-hue') {\n            slider = helper.extend({}, {\n              maxLeft: 0,\n              maxTop: 100,\n              callLeft: false,\n              callTop: 'setHue'\n            });\n          }\n          else if (zone.className === 'colorpicker-alpha') {\n            slider = helper.extend({}, {\n              maxLeft: 0,\n              maxTop: 100,\n              callLeft: false,\n              callTop: 'setAlpha'\n            });\n          } else {\n            slider = null;\n            return false;\n          }\n          slider.knob = zone.children[0].style;\n          slider.left = event.pageX - helper.getOffset(zone).left;\n          slider.top = event.pageY - helper.getOffset(zone).top;\n          pointer = {\n            left: event.pageX,\n            top: event.pageY\n          };\n        };\n\n        var mousemove = function (event) {\n          if (!slider) {\n            return;\n          }\n          var left = Math.max(\n            0,\n            Math.min(\n              slider.maxLeft,\n              slider.left + ((event.pageX || pointer.left) - pointer.left)\n            )\n          );\n\n          var top = Math.max(\n            0,\n            Math.min(\n              slider.maxTop,\n              slider.top + ((event.pageY || pointer.top) - pointer.top)\n            )\n          );\n\n          slider.knob.left = left + 'px';\n          slider.knob.top = top + 'px';\n          if (slider.callLeft) {\n            pickerColor[slider.callLeft].call(pickerColor, left / 100);\n          }\n          if (slider.callTop) {\n            pickerColor[slider.callTop].call(pickerColor, top / 100);\n          }\n          previewColor();\n          var newColor = pickerColor[thisFormat]();\n          elem.val(newColor);\n          if(ngModel) {\n            $scope.$apply(ngModel.$setViewValue(newColor));\n          }\n          return false;\n        };\n\n        var mouseup = function () {\n          $document.unbind('mousemove', mousemove);\n          $document.unbind('mouseup', mouseup);\n        };\n\n        var update = function () {\n          pickerColor.setColor(elem.val());\n          pickerColorPointers.eq(0).css({\n            left: pickerColor.value.s * 100 + 'px',\n            top: 100 - pickerColor.value.b * 100 + 'px'\n          });\n          pickerColorPointers.eq(1).css('top', 100 * (1 - pickerColor.value.h) + 'px');\n          pickerColorPointers.eq(2).css('top', 100 * (1 - pickerColor.value.a) + 'px');\n          previewColor();\n        };\n\n        var getColorpickerTemplatePosition = function() {\n          var\n            positionValue,\n            positionOffset = helper.getOffset(elem[0]);\n\n          if (position === 'top') {\n            positionValue =  {\n              'top': positionOffset.top - 146,\n              'left': positionOffset.left\n            }\n          } else if (position === 'right') {\n            positionValue = {\n              'top': positionOffset.top,\n              'left': positionOffset.left + 141\n            }\n          } else if (position === 'bottom') {\n            positionValue = {\n              'top': positionOffset.top + elem[0].offsetHeight,\n              'left': positionOffset.left\n            }\n          } else if (position === 'left') {\n            positionValue = {\n              'top': positionOffset.top,\n              'left': positionOffset.left - 131\n            }\n          }\n          return {\n            'top': positionValue.top + 'px',\n            'left': positionValue.left + 'px'\n          };\n        };\n\n        elem.bind('click', function () {\n          update();\n          colorpickerTemplate\n            .addClass('colorpicker-visible')\n            .css(getColorpickerTemplatePosition());\n        });\n\n        colorpickerTemplate.bind('mousedown', function (event) {\n          event.stopPropagation();\n          event.preventDefault();\n        });\n\n        colorpickerTemplate.find('div').bind('click', function (event) {\n          slidersUpdate(event);\n          mousemove(event);\n        });\n\n        colorpickerTemplate.find('div').bind('mousedown', function (event) {\n          slidersUpdate(event);\n          $document.bind('mousemove', mousemove);\n          $document.bind('mouseup', mouseup);\n        });\n\n        var hideColorpickerTemplate = function() {\n          if (colorpickerTemplate.hasClass('colorpicker-visible')) {\n            colorpickerTemplate.removeClass('colorpicker-visible');\n          }\n        };\n\n        colorpickerTemplate.find('button').bind('click', function () {\n          hideColorpickerTemplate();\n        });\n\n        $document.bind('mousedown', function () {\n          hideColorpickerTemplate();\n        });\n      }\n    };\n  }]);\n"]}